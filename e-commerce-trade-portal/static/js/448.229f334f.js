"use strict";(self["webpackChunke_commerce"]=self["webpackChunke_commerce"]||[]).push([[448],{4049:function(t,a,e){e.d(a,{A:function(){return d}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"pagination",on:{click:t.pagination}},[a("div",{staticClass:"prePage",on:{click:t.prePage}}),t.startNumber?a("div",{attrs:{"data-name":"startNumber"}},[t._v("1")]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.startDot,expression:"startDot"}],staticClass:"startDot",on:{click:t.goFirst}}),t._l(t.end,(function(e,s){return[e>=t.start?a("div",{key:s,class:{active:t.pageData.currentPage===s+1},attrs:{"data-id":s}},[t._v(" "+t._s(e)+" ")]):t._e()]})),a("div",{directives:[{name:"show",rawName:"v-show",value:t.endDot,expression:"endDot"}],staticClass:"endDot",on:{click:t.goLast}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.endNumber,expression:"endNumber"}],staticClass:"total",attrs:{"data-name":"endNumber"}},[t._v(t._s(t.totalPage))]),a("div",{staticClass:"nextPage",on:{click:t.nextPage}})],2)},r=[],i={name:"Pagination",props:["currentPage","pageSize","total","continues"],data(){return{startNumber:!1,startDot:!1,endNumber:!0,endDot:!0,start:0,end:0,pageData:{...this.$props}}},mounted(){this.render()},computed:{totalPage(){return Math.ceil(this.total/this.pageSize)}},methods:{render(){const{currentPage:t,total:a,continues:e}=this.pageData;this.start=0,this.end=0,a<e?(this.start=1,this.end=this.totalPage):(this.start=t-parseInt(e/2),this.end=t+parseInt(e/2),this.start<1&&(this.start=1,this.end=e),this.end>this.totalPage&&(this.start=this.totalPage-e+1,this.end=this.totalPage,this.endNumber=!1,this.endDot=!1)),this.startNumber=t>3,this.startDot=t>4,t<=this.totalPage&&(this.endNumber=!1,this.endDot=!1),t<this.totalPage-2&&(this.endNumber=!0,this.endDot=!0)},prePage(){this.pageData.currentPage<=1||this.pageData.currentPage--},nextPage(){this.pageData.currentPage>=this.totalPage||this.pageData.currentPage++},pagination(t){const a=t.target.dataset.id,e=t.target.dataset.name;a&&(this.pageData.currentPage=parseInt(a)+1),"startNumber"===e&&(this.pageData.currentPage=1),"endNumber"===e&&(this.pageData.currentPage=this.totalPage)},goFirst(){this.pageData.currentPage=1},goLast(){this.pageData.currentPage=this.totalPage}},watch:{"pageData.currentPage"(t){this.$emit("getCurrentPage",t),this.render()}}},c=i,o=e(1656),n=(0,o.A)(c,s,r,!1,null,"4a41f5ae",null),d=n.exports},4448:function(t,a,e){e.r(a),e.d(a,{default:function(){return P}});var s=function(){var t=this,a=t._self._c;return a("div",[a("TypeNav"),a("div",{staticClass:"main"},[a("div",{staticClass:"py-container"},[a("div",{staticClass:"bread"},[t._m(0),a("ul",{staticClass:"fl sui-tag",on:{click:t.removeBreadList}},[t.searchParams.categoryName?a("li",{staticClass:"with-x"},[t._v(" "+t._s(t.searchParams.categoryName)+" "),a("i",{staticClass:"delete",attrs:{"data-key":"classify"}},[t._v("×")])]):t._e(),t.searchParams.keyword?a("li",{staticClass:"with-x"},[t._v(" "+t._s(t.searchParams.keyword)+" "),a("i",{staticClass:"delete",attrs:{"data-key":"keyword"}},[t._v("×")])]):t._e(),t.searchParams.trademark?a("li",{staticClass:"with-x"},[t._v(" "+t._s(t.searchParams.trademark.split(":")[1])+" "),a("i",{staticClass:"delete",attrs:{"data-key":"trademark"}},[t._v("×")])]):t._e(),t.searchParams.props?t._l(t.searchParams.props,(function(e,s){return a("li",{key:s,staticClass:"with-x"},[t._v(" "+t._s(e.split(":")[1])+" "),a("i",{staticClass:"delete",attrs:{"data-key":"attr","data-id":s}},[t._v("×")])])})):t._e()],2)]),a("SearchSelector",{on:{CustomTradeMark:t.handleTradeMarkInfo,customAttrInfo:t.attrInfo}}),a("div",{staticClass:"details clearfix"},[a("div",{staticClass:"sui-navbar"},[a("div",{staticClass:"navbar-inner filter"},[a("ul",{staticClass:"sui-nav",on:{click:t.orderClick}},[a("li",{class:{active:t.orderCheck("1")}},[a("a",{attrs:{"data-id":"1"}},[t._v("综合 "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.orderCheck("1"),expression:"orderCheck('1')"}],class:{iconfont:!0,"icon-up":t.orderCheck("1,asc"),"icon-down":t.orderCheck("1,desc")}})])]),a("li",{class:{active:t.orderCheck("2")}},[a("a",{attrs:{"data-id":"2"}},[t._v("价格 "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.orderCheck("2"),expression:"orderCheck('2')"}],class:{iconfont:!0,"icon-up":t.orderCheck("2,asc"),"icon-down":t.orderCheck("2,desc")}})])])])])]),a("div",{staticClass:"goods-list"},[a("ul",{staticClass:"yui3-g"},t._l(t.goodsList,(function(e){return a("li",{key:e.id,staticClass:"yui3-u-1-5"},[a("div",{staticClass:"list-wrap"},[a("div",{staticClass:"p-img"},[a("router-link",{attrs:{to:`/detail/${e.id}`}},[a("img",{attrs:{src:e.defaultImg}})])],1),a("div",{staticClass:"price"},[a("strong",[a("em",[t._v("¥")]),a("i",[t._v(t._s(e.price)+".00")])])]),a("div",{staticClass:"attr"},[a("a",{attrs:{target:"_blank",href:"item.html",title:"促销信息，下单即赠送三个月CIBN视频会员卡！【小米电视新品4A 58 火爆预约中】"}},[t._v(t._s(e.title))])]),t._m(1,!0),t._m(2,!0)])])})),0)]),a("Pagination",{staticStyle:{"text-align":"center"},attrs:{currentPage:t.searchParams.pageNo,pageSize:t.searchParams.pageSize,total:t.total,continues:5},on:{getCurrentPage:t.handleAxiosPage}})],1)],1)])],1)},r=[function(){var t=this,a=t._self._c;return a("ul",{staticClass:"fl sui-breadcrumb"},[a("li",[a("a",{attrs:{href:"#"}},[t._v("全部结果")])])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"commit"},[a("i",{staticClass:"command"},[t._v("已有"),a("span",[t._v("2000")]),t._v("人评价")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"operate"},[a("a",{staticClass:"sui-btn btn-bordered btn-danger",attrs:{href:"success-cart.html",target:"_blank"}},[t._v("加入购物车")]),a("a",{staticClass:"sui-btn btn-bordered",attrs:{href:"javascript:void(0);"}},[t._v("收藏")])])}],i=(e(4114),e(4049)),c=e(3518),o=function(){var t=this,a=t._self._c;return a("div",{staticClass:"clearfix selector"},[a("div",{staticClass:"type-wrap logo"},[a("div",{staticClass:"fl key brand"},[t._v("品牌")]),a("div",{staticClass:"value logos"},[a("ul",{staticClass:"logo-list"},t._l(t.trademarkList,(function(e){return a("li",{key:e.tmId,on:{click:function(a){return t.tradeMarkHandle(e)}}},[t._v(t._s(e.tmName))])})),0)]),t._m(0)]),t._l(t.attrsList,(function(e){return a("div",{key:e.attrId,staticClass:"type-wrap"},[a("div",{staticClass:"fl key"},[t._v(t._s(e.attrName))]),a("div",{staticClass:"fl value"},[a("ul",{staticClass:"type-list"},t._l(e.attrValueList,(function(s,r){return a("li",{key:r,on:{click:function(a){return t.attrInfo(e,s)}}},[a("a",[t._v(t._s(s))])])})),0)]),a("div",{staticClass:"fl ext"})])}))],2)},n=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"ext"},[a("a",{staticClass:"sui-btn",attrs:{href:"javascript:void(0);"}},[t._v("多选")]),a("a",{attrs:{href:"javascript:void(0);"}},[t._v("更多")])])}],d={name:"SearchSelector",computed:{...(0,c.L8)("search",["trademarkList","attrsList"])},methods:{tradeMarkHandle(t){this.$emit("CustomTradeMark",t)},attrInfo(t,a){this.$emit("customAttrInfo",t,a)}}},h=d,l=e(1656),u=(0,l.A)(h,o,n,!1,null,"33c90e03",null),m=u.exports,g={name:"Search",components:{SearchSelector:m,Pagination:i.A},data(){return{searchParams:{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:"",order:"2:desc",pageNo:1,pageSize:10,props:[],trademark:""},orderThrottle:!0}},computed:{...(0,c.L8)("search",["goodsList"]),...(0,c.aH)({total:t=>t.search.searchList.total})},beforeMount(){this.upDate()},mounted(){this.getData()},methods:{upDate(){this.searchParams={...this.searchParams,...this.$route.query,...this.$route.params}},getData(){this.$store.dispatch("search/getSearchInfoList",this.searchParams)},removeBreadList(t){if("delete"===t.target.className)switch(t.target.dataset.key){case"classify":this.searchParams.categoryName=void 0,this.searchParams.category1Id=void 0,this.searchParams.category2Id=void 0,this.searchParams.category3Id=void 0,this.getData(),this.$router.push({name:"search",params:this.$route.params});break;case"keyword":this.searchParams.keyword=void 0,this.$bus.$emit("clear"),this.$router.push({name:"search",query:this.$route.query});break;case"trademark":this.searchParams.trademark=void 0,this.getData();break;case"attr":this.searchParams.props.splice(t.target.dataset.id,1),this.getData();break}},handleTradeMarkInfo({tmId:t,tmName:a}){this.searchParams.trademark=`${t}:${a}`,this.getData()},attrInfo(t,a){let e=`${t.attrId}:${a}:${t.attrName}`;this.searchParams.props.includes(e)||(this.searchParams.props.push(e),this.getData())},orderCheck(t){switch(t){case"1":return this.searchParams.order.includes("1");case"1,asc":return this.searchParams.order.includes("asc");case"1,desc":return this.searchParams.order.includes("desc");case"2":return this.searchParams.order.includes("2");case"2,asc":return this.searchParams.order.includes("asc");case"2,desc":return this.searchParams.order.includes("desc")}},orderClick(t){if(this.orderThrottle){this.orderThrottle=!1;const a=this.searchParams.order.split(":")[1];switch(t.target.dataset.id){case"1":this.searchParams.order="asc"===a?"1:desc":"1:asc",this.getData();break;case"2":this.searchParams.order="asc"===a?"2:desc":"2:asc",this.getData();break}setTimeout((()=>{this.orderThrottle=!0}),1e3)}},handlePreNext(){console.log(13213)},handleAxiosPage(t){this.searchParams.pageNo=t,this.getData()}},watch:{$route(){this.upDate(),this.getData(),this.searchParams.category1Id=void 0,this.searchParams.category2Id=void 0,this.searchParams.category3Id=void 0}}},v=g,p=(0,l.A)(v,s,r,!1,null,"703c9d66",null),P=p.exports}}]);